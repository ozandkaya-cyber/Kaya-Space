<section class="kv-model" aria-label="Konfliktstile – Überblick">
  <h2>Das Modell im Überblick</h2>
  <p class="kv-hint">Vertikal: eigene Bedürfnisse · Horizontal: Bedürfnisse anderer</p>

  <div class="kv-grid">
    <figure class="kv-figure">
      <div class="kv-canvas" id="kvCanvas" role="img" aria-label="2x2-Modell">
        <!-- Quadranten -->
        <div class="q q1"></div><div class="q q2"></div><div class="q q3"></div><div class="q q4"></div>
        <!-- Achsen -->
        <div class="ax v"></div><div class="ax h"></div>

        <!-- Hotspots als Buttons mit Koordinaten in % -->
        <button class="hot" data-key="A" data-x="25" data-y="25" aria-label="A – Durchsetzen">A</button>
        <button class="hot" data-key="E" data-x="75" data-y="25" aria-label="E – Gemeinsam gewinnen">E</button>
        <button class="hot" data-key="C" data-x="25" data-y="75" aria-label="C – Vermeiden">C</button>
        <button class="hot" data-key="B" data-x="75" data-y="75" aria-label="B – Nachgeben">B</button>
        <button class="hot" data-key="D" data-x="50" data-y="50" aria-label="D – Kompromiss">D</button>

        <!-- Floating Info-Karte -->
        <div class="kv-card" id="kvCard" hidden>
          <h4 id="kvCardTitle"></h4>
          <p id="kvCardDesc"></p>
        </div>
      </div>
      <figcaption class="kv-legend">Klicke auf A–E. Buchstabe dreht sich, Info erscheint am Punkt.</figcaption>
    </figure>

    <aside class="kv-panel" aria-live="polite">
      <h3 id="kvTitle">Stil wählen</h3>
      <p id="kvDesc">Wähle A–E im Diagramm oder in der Liste.</p>
      <div class="kv-table-wrap">
        <table class="kv-table">
          <thead><tr><th>Stil</th><th>Bezeichnung</th><th>Kurzbeschreibung</th></tr></thead>
          <tbody>
            <tr data-key="A"><td>A</td><td>Durchsetzen</td><td>Eigene Interessen dominieren</td></tr>
            <tr data-key="B"><td>B</td><td>Nachgeben</td><td>Bedürfnisse anderer stehen im Vordergrund</td></tr>
            <tr data-key="C"><td>C</td><td>Vermeiden</td><td>Konflikt wird umgangen</td></tr>
            <tr data-key="D"><td>D</td><td>Kompromiss</td><td>Beide Seiten geben etwas nach</td></tr>
            <tr data-key="E"><td>E</td><td>Gemeinsam gewinnen</td><td>Win-win-Lösung für beide Parteien</td></tr>
          </tbody>
        </table>
      </div>
      <p class="kv-note">Hinweis: Modell vereinfacht die Realität und dient der Reflexion.</p>
    </aside>
  </div>
</section>

<style>
  .kv-model{max-width:980px;margin:0 auto}
  .kv-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:1.25rem}
  @media (max-width:860px){.kv-grid{grid-template-columns:1fr}}
  .kv-figure{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:.75rem}
  .kv-canvas{position:relative;aspect-ratio:1/1;width:100%;border-radius:10px;overflow:hidden}
  .q{position:absolute;width:50%;height:50%}
  .q1{left:0;top:0;background:#eef6f1;border:1px solid #c7dfd1;border-right:none;border-bottom:none}
  .q2{left:50%;top:0;background:#e9f0ff;border:1px solid #c7d2fe;border-left:none;border-bottom:none}
  .q3{left:0;top:50%;background:#fff4e6;border:1px solid #ffddb0;border-right:none;border-top:none}
  .q4{left:50%;top:50%;background:#f3edf9;border:1px solid #dcc7ff;border-left:none;border-top:none}
  .ax.v{position:absolute;left:50%;top:0;width:0;height:100%;border-left:2px dashed #777}
  .ax.h{position:absolute;left:0;top:50%;width:100%;height:0;border-top:2px dashed #777}
  .hot{
    position:absolute;transform:translate(-50%,-50%);
    width:56px;height:56px;border-radius:50%;border:2px solid #0f172a;background:#fff;
    display:flex;align-items:center;justify-content:center;font-weight:700;letter-spacing:.5px;
    transition:transform .25s ease, box-shadow .25s ease;
    box-shadow:0 1px 0 rgba(0,0,0,.04), 0 8px 20px rgba(0,0,0,.05)
  }
  .hot[data-key="E"]{border-color:#1d4ed8;color:#1d4ed8}
  .hot[data-key="A"]{border-color:#0f766e;color:#0f766e}
  .hot[data-key="B"]{border-color:#7c3aed;color:#7c3aed}
  .hot[data-key="C"]{border-color:#ea580c;color:#ea580c}
  .hot[data-key="D"]{border-color:#111827;color:#111827}
  .hot.active{transform:translate(-50%,-50%) rotateY(180deg) scale(1.05)}
  .kv-card{
    position:absolute;min-width:220px;max-width:320px;background:#fcfdfc;border:1px solid #e5efe9;
    border-radius:12px;padding:.75rem;box-shadow:0 8px 24px rgba(0,0,0,.08);transform:translate(-50%,-110%);
    z-index:2
  }
  .kv-card:after{content:"";position:absolute;left:50%;bottom:-8px;transform:translateX(-50%);
    border:8px solid transparent;border-top-color:#e5efe9}
  .kv-table{width:100%;border-collapse:collapse}
  .kv-table th,.kv-table td{border-bottom:1px solid #e5e7eb;padding:.5rem .4rem;text-align:left}
  .kv-table tr[aria-current="true"]{background:#eef6f1;font-weight:600}
  .kv-note{margin-top:.75rem;font-size:.9rem;color:#374151}
</style>

<script>
  (function(){
    const map = {
      A:{t:"A – Durchsetzen",d:"Eigene Interessen dominieren. Zielstark, direkt, riskiert Widerstand."},
      B:{t:"B – Nachgeben",d:"Bedürfnisse anderer stehen im Vordergrund. Rücksichtsvoll, harmonieorientiert."},
      C:{t:"C – Vermeiden",d:"Konflikt wird umgangen. Kurzfristige Entlastung, langfristig ungelöst."},
      D:{t:"D – Kompromiss",d:"Beide Seiten geben etwas nach. Ausgleich, pragmatisch, niemand gewinnt vollständig."},
      E:{t:"E – Gemeinsam gewinnen",d:"Win-win. Kooperation, kreative Lösungen, braucht Offenheit und Zeit."}
    };
    const canvas = document.getElementById('kvCanvas');
    const card = document.getElementById('kvCard');
    const cTitle = document.getElementById('kvCardTitle');
    const cDesc  = document.getElementById('kvCardDesc');
    const title  = document.getElementById('kvTitle');
    const desc   = document.getElementById('kvDesc');
    const rows   = Array.from(document.querySelectorAll('.kv-table tbody tr'));
    const hots   = Array.from(canvas.querySelectorAll('.hot'));

    function pos(el){
      const x = parseFloat(el.dataset.x), y = parseFloat(el.dataset.y);
      const r = canvas.getBoundingClientRect();
      return { left: r.width * (x/100), top: r.height * (y/100) };
    }
    function select(key, el){
      const m = map[key]; if(!m) return;
      // Panel
      title.textContent = m.t; desc.textContent = m.d;
      rows.forEach(tr => tr.removeAttribute('aria-current'));
      const target = rows.find(tr => tr.dataset.key === key); if(target) target.setAttribute('aria-current','true');
      // Flip state
      hots.forEach(h=>h.classList.toggle('active', h===el));
      // Card
      cTitle.textContent = m.t; cDesc.textContent = m.d;
      if(el){
        const p = pos(el);
        card.style.left = p.left+'px';
        card.style.top  = p.top+'px';
        card.hidden = false;
      }
    }
    // Hotspot clicks
    hots.forEach(h=>{
      // initial positions
      h.style.left = h.dataset.x+'%'; h.style.top = h.dataset.y+'%';
      h.addEventListener('click', ()=>select(h.dataset.key, h));
      h.addEventListener('keydown', e=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); select(h.dataset.key, h); }
      });
    });
    // Table clicks
    rows.forEach(r=>r.addEventListener('click', ()=>{
      const key = r.dataset.key;
      const h = hots.find(x=>x.dataset.key===key);
      select(key, h || null);
    }));
    // Default
    const def = hots.find(h=>h.dataset.key==='E'); select('E', def);
    // Recalculate on resize
    window.addEventListener('resize', ()=>{
      const act = hots.find(h=>h.classList.contains('active'));
      if(act) select(act.dataset.key, act);
    });
  })();
</script>
